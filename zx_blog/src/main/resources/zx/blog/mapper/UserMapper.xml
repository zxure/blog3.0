<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="zx.blog.mapper.UserMapper">

	<resultMap type="zx.blog.user.domain.User" id="user">
		<id column="userId" property="userId"/>
		<result column="title" property="title"/>
		<result column="userName" property="userName"/>
		<result column="userPassword" property="userPassword"/>
		<result column="lastLoginTime" property="lastLoginTime" typeHandler="zx.blog.myibtais.typehandler.TimeDateTypeHandler" />
		<result column="userState" property="userState"/>
		<result column="privilege" property="privilege"/>
		<result column="imgUrl" property="imgUrl"/>
	</resultMap>

	<sql id="base_column_list">
		userId, userName, title, userPassword, lastLoginTime, userState, privilege, imgUrl 
	</sql>

	<!-- 查询全部 用户 -->
	<select id="findAll" resultMap="user">
		SELECT 
		<include refid="base_column_list" />
		FROM user
	</select>
	
	<!-- 根据ID 查询 用户 -->
	<select id="findByName" resultMap="user">
		SELECT
		<include refid="base_column_list" />
		FROM user WHERE userName=#{userName}
	</select>

	<update id="updateUser" parameterType="zx.blog.user.domain.User">
		UPDATE user set
		userName = #{userName},
		title = #{title},
		userPassword = #{userPassword},
		lastLoginTime = #{lastLoginTime, typeHandler=zx.blog.myibtais.typehandler.TimeDateTypeHandler},
		userState = #{userState}, 
		privilege = #{privilege},
		imgUrl = #{imgUrl}
		WHERE userId = #{userId}
	</update>
</mapper>


